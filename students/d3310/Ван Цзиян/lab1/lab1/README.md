# Личный Финансовый Менеджер

Сервис управления личными финансами на базе FastAPI, реализующий полную систему аутентификации пользователей, управления финансами, бюджетами и целями.

## Быстрый старт

### 1. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 2. Инициализация базы данных
```bash
python -m app.db.init_db
```

### 3. Запуск сервера
```bash
uvicorn app.main:app --reload
```

### 4. Доступ к приложению
- Главная страница: http://127.0.0.1:8000/
- Документация API: http://127.0.0.1:8000/docs

## Функциональные возможности

- **Аутентификация пользователей**: JWT токены, шифрование паролей
- **Управление финансами**: Записи доходов и расходов, управление категориями
- **Управление бюджетом**: Поддержка отображения положительных и отрицательных бюджетов с умными напоминаниями
- **Управление целями**: Установка и отслеживание финансовых целей
- **Современный интерфейс**: Адаптивный дизайн, обновление данных в реальном времени

## Технологический стек

- **Backend**: FastAPI + SQLModel
- **База данных**: PostgreSQL + Alembic (миграции)
- **Аутентификация**: JWT + bcrypt
- **Frontend**: HTML + CSS + JavaScript
- **Документация**: MkDocs + Material for MkDocs
- **Развертывание**: GitHub Pages + GitHub Actions

## Документация

Подробный отчет о лабораторной работе см. в: [Полная документация](docs/index.md)

### Просмотр документации локально
```bash
# Установка MkDocs
pip install mkdocs-material

# Запуск сервера документации
mkdocs serve

# Доступ: http://127.0.0.1:8001
```

## Развертывание на GitHub Pages

Данный проект поддерживает автоматическое развертывание на GitHub Pages для создания профессионального отчета о лабораторной работе.

### Шаги развертывания

1. **Отправка кода на GitHub**
   ```bash
   git add .
   git commit -m "Add laboratory work report"
   git push origin main
   ```

2. **Включение GitHub Pages**
   - Перейдите в настройки репозитория (Settings)
   - Найдите опцию Pages
   - Выберите Source "GitHub Actions"

3. **Автоматическое развертывание**
   - При каждом push в ветку `main` GitHub Actions автоматически соберет и развернет документацию
   - После завершения развертывания документация будет доступна по адресу `https://lab4120.github.io/ITMO_ICT_WebDevelopment_tools_2024-2025/students/d3310/Ван%20Цзиянь/lab1/lab1`

### Структура документации

```
docs/
├── index.md                    # Главная страница отчета
├── architecture.md             # Техническая архитектура
├── structure.md               # Структура проекта
├── user-management.md          # Управление пользователями
├── finance-management.md       # Управление финансами
├── category-management.md      # Управление категориями
├── budget-management.md        # Управление бюджетами
├── goal-management.md          # Управление целями
├── database-design.md          # Дизайн базы данных
├── api-design.md              # Дизайн API
├── security.md                # Механизмы безопасности
├── frontend.md                # Фронтенд интерфейс
├── installation.md            # Установка и конфигурация
├── running.md                 # Инструкции по запуску
└── api-docs.md                # Документация API
```

## API эндпоинты

| Метод | Эндпоинт | Функция | Аутентификация |
|-------|----------|---------|----------------|
| POST | `/api/v1/users/register` | Регистрация пользователя | Нет |
| POST | `/api/v1/users/login` | Вход пользователя | Нет |
| GET | `/api/v1/users/me` | Получение текущего пользователя | Да |
| GET | `/api/v1/users/` | Получение всех пользователей | Да |
| POST | `/api/v1/users/change-password` | Изменение пароля | Да |
| POST | `/api/v1/finances/` | Создание финансовой записи | Да |
| GET | `/api/v1/finances/` | Получение финансовых записей | Да |
| POST | `/api/v1/categories/` | Создание категории | Да |
| GET | `/api/v1/categories/` | Получение списка категорий | Да |
| POST | `/api/v1/budgets/` | Создание бюджета | Да |
| GET | `/api/v1/budgets/` | Получение списка бюджетов | Да |
| POST | `/api/v1/goals/` | Создание цели | Да |
| GET | `/api/v1/goals/` | Получение списка целей | Да |

## Разработка

### Структура проекта
```
lab1/
├── app/                           # Основной код приложения
│   ├── api/v1/                   # API маршруты версии 1
│   │   ├── user.py              # Пользовательские API
│   │   ├── finance.py           # Финансовые API
│   │   ├── budget.py            # Бюджетные API
│   │   ├── goal.py              # Целевые API
│   │   └── category.py          # Категорийные API
│   ├── core/                     # Основная конфигурация
│   │   ├── config.py            # Настройки приложения
│   │   └── security.py          # Безопасность и JWT
│   ├── crud/                     # Операции с базой данных
│   │   └── user.py              # CRUD операции пользователей
│   ├── db/                       # Конфигурация базы данных
│   │   ├── base.py              # Базовые модели
│   │   ├── session.py           # Сессии базы данных
│   │   └── init_db.py           # Инициализация БД
│   ├── models/                   # Модели данных SQLModel
│   │   ├── user.py              # Модель пользователя
│   │   ├── category.py          # Модель категории
│   │   ├── budget.py            # Модель бюджета
│   │   ├── finance.py           # Модель финансов
│   │   ├── goal.py              # Модель цели
│   │   └── association.py       # Ассоциативные модели
│   ├── schemas/                  # Pydantic схемы
│   │   ├── user.py              # Схемы пользователя
│   │   ├── category.py          # Схемы категории
│   │   ├── budget.py            # Схемы бюджета
│   │   ├── finance.py           # Схемы финансов
│   │   ├── goal.py              # Схемы цели
│   │   └── association.py       # Схемы ассоциаций
│   ├── templates/                # HTML шаблоны
│   │   └── index.html           # Главная страница
│   └── main.py                   # Точка входа FastAPI
├── alembic/                      # Миграции базы данных
│   ├── versions/                 # Файлы миграций
│   ├── env.py                    # Конфигурация Alembic
│   └── script.py.mako            # Шаблон миграций
├── docs/                         # Документация проекта
│   └── index.md                  # Основная документация
├── .github/workflows/            # GitHub Actions
│   └── deploy.yml                # Автоматическое развертывание
├── alembic.ini                   # Конфигурация Alembic
├── mkdocs.yml                    # Конфигурация MkDocs
├── requirements.txt              # Зависимости Python
└── README.md                     # Документация проекта
```

### Переменные окружения
Создайте файл `.env`:
```env
DATABASE_URL=postgresql://username:password@localhost:5432/finance_db
SECRET_KEY=your-secret-key-here
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
```

### Настройка PostgreSQL
1. Установите PostgreSQL на вашей системе
2. Создайте базу данных:
   ```sql
   CREATE DATABASE finance_db;
   ```
3. Обновите DATABASE_URL в файле `.env` с вашими учетными данными

### Миграции базы данных
```bash
# Создание миграции
alembic revision --autogenerate -m "Initial migration"

# Применение миграций
alembic upgrade head
```

## Лицензия

MIT License

## Вклад в проект

Приветствуются Issues и Pull Request!

---

*Данная лабораторная работа реализует полный сервис управления личными финансами, включающий аутентификацию пользователей, управление финансами, бюджетами и целями как основные функции.* 